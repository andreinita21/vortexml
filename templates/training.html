{% extends "base.html" %}
{% set active = "training" %}

{% block title %}Training Dashboard â€” Vortex ML{% endblock %}

{% block content %}
<div class="page-header">
    <h1>âš¡ Training Dashboard</h1>
    <p>Watch your neural network learn in real-time.</p>
</div>

<!-- Top Stats -->
<div class="training-top-bar">
    <div class="stat-card">
        <div class="stat-value gradient" id="stat-epoch">0/0</div>
        <div class="stat-label">Epoch</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="stat-loss" style="color: var(--accent-2)">â€”</div>
        <div class="stat-label">Train Loss</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="stat-acc" style="color: #22c55e">â€”</div>
        <div class="stat-label">Val Accuracy</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="stat-eta" style="color: var(--accent-4)">â€”</div>
        <div class="stat-label">ETA</div>
    </div>
</div>

<!-- Progress Bar -->
<div class="glass-panel glass-panel-sm">
    <div class="flex-between mb-1">
        <span class="text-muted" style="font-size:0.85rem; font-weight:600">Training Progress</span>
        <div class="flex gap-05">
            <span class="es-badge hidden" id="es-badge" title="Early Stopping active">ğŸ›‘ ES</span>
            <span class="text-muted" style="font-size:0.85rem; font-family:var(--font-mono)" id="progress-pct">0%</span>
        </div>
    </div>
    <div class="progress-bar-container" style="height:10px">
        <div class="progress-bar" id="training-progress" style="width:0%"></div>
    </div>
</div>

<!-- Charts + Network Viz -->
<div class="training-grid">
    <div class="glass-panel">
        <div class="panel-title"><span class="pt-icon">ğŸ“ˆ</span> Loss & Accuracy</div>
        <div class="chart-container">
            <canvas id="training-chart"></canvas>
        </div>
    </div>
    <div class="glass-panel">
        <div class="panel-title"><span class="pt-icon">ğŸ”®</span> Network Visualization</div>
        <canvas id="network-canvas" class="network-viz"></canvas>
    </div>
</div>

<!-- Log + Controls -->
<div class="glass-panel">
    <div class="flex-between mb-1">
        <div class="panel-title mb-0"><span class="pt-icon">ğŸ“</span> Training Log</div>
        <div class="flex gap-1">
            <button class="btn btn-save btn-sm hidden" id="btn-save-weights">ğŸ’¾ Save Weights</button>
            <button class="btn btn-danger btn-sm hidden" id="btn-stop">â¹ Stop Training</button>
            <button class="btn btn-primary btn-sm" id="btn-start">â–¶ Start Training</button>
        </div>
    </div>
    <div class="training-log" id="training-log">
        <div class="log-entry text-muted">Waiting to start training...</div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/training.js?v={{ cache_version }}"></script>
{% endblock %}